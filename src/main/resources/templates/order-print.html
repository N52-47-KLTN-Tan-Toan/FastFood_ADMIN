<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>In hóa đơn</title>

    <link rel="icon" type="image/png"
          href="https://firebasestorage.googleapis.com/v0/b/n52-47-kltn-tan-toan.appspot.com/o/logo-admin2.png?alt=media&token=c566066a-8f66-49e1-ba6d-2067b3d2eda1"/>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/adminlte.min.css">
</head>
<body>
<div class="wrapper">
    <!-- Main content -->
    <section class="invoice">
        <!-- title row -->
        <div class="row">
            <div class="col-12" style="margin-left: 100px">
                <h2 class="page-header" style="margin-left: 34px">
                    <img src="https://firebasestorage.googleapis.com/v0/b/n52-47-kltn-tan-toan.appspot.com/o/logo-admin2.png?alt=media&token=c566066a-8f66-49e1-ba6d-2067b3d2eda1"
                         alt="T&T Logo" class="brand-image" style="opacity: .8">
                </h2>
                <span th:text="'Ngày lập hóa đơn: ' + ${#dates.format(#dates.createNow(), 'dd/MM/yyyy HH:mm')}"></span>
            </div>
            <!-- /.col -->
        </div>
        <!-- info row -->
        <div class="row invoice-info">
            <!-- /.col -->
            <div class="col-sm-4 invoice-col">
                Khách hàng:
                <address>
                    <strong th:text="${donDatHang.khachHang.name}"></strong><br>
                    Điện thoại: <span th:text="${donDatHang.khachHang.phone}"></span><br>
                    Hình thức: <span th:text="${donDatHang.hinhThuc}"></span><br>
                    Nơi giao món: <span th:text="${donDatHang.diaChiGiaoHang}"></span>
                </address>
            </div>
            <div class="col-sm-4 invoice-col">
                Người bán hàng:
                <address><strong th:if="${#request.userPrincipal != null}"
                                 sec:authentication="principal.fullName"></strong></address>
            </div>
        </div>
        <!-- /.row -->

        <!-- Table row -->
        <div class="row">
            <div class="col-6 table-responsive">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th class="text-center">STT</th>
                        <th style="width: 30%;">Mặt hàng</th>
                        <th class="text-center">Số lượng</th>
                        <th>Thành tiền</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="data, value: ${chiTietDonDatHang}">
                        <td class="text-center" th:text="${value.index + 1}"></td>
                        <td th:text="${data.matHang.tenMH} + 'hột gà nướng hột vịt lộn trứng cút lộn'"></td>
                        <td class="text-center" th:text="${data.soLuongDat}"></td>
                        <td th:text="${#numbers.formatDecimal(data.donGia, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->

        <div class="row">
            <!-- /.col -->
            <div class="col-6">
                <p class="lead"
                   th:text="'Ngày đặt hàng ' + ${donDatHang.ngayDatHang.getDayOfMonth()} + '/'
                   + ${donDatHang.ngayDatHang.getMonth().value} + '/' + ${donDatHang.ngayDatHang.getYear()}"></p>

                <div class="table-responsive">
                    <table class="table">
                        <tr>
                            <th style="width:70%">Tổng tiền mặt hàng:</th>
                            <td th:text="${#numbers.formatDecimal(subTotal, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                        </tr>
                        <tr>
                            <th>Tiền ship:</th>
                            <td th:if="${donDatHang.hinhThuc == 'Giao tận nơi'}"
                                th:text="${#numbers.formatDecimal(15000, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                            <td th:if="${donDatHang.hinhThuc != 'Giao tận nơi'}"
                                th:text="${#numbers.formatDecimal(0, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                        </tr>
                        <tr>
                            <th>Tổng cộng:</th>
                            <td th:if="${donDatHang.hinhThuc == 'Giao tận nơi'}"
                                th:text="${#numbers.formatDecimal(donDatHang.tongTien + 15000, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                            <td th:if="${donDatHang.hinhThuc != 'Giao tận nơi'}"
                                th:text="${#numbers.formatDecimal(donDatHang.tongTien, 0, 'COMMA', 0, 'POINT')} + ' VND'"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->
</div>
<!-- ./wrapper -->
<!-- Page specific script -->
<script>
    window.addEventListener("load", window.print());
</script>

</body>
</html>
